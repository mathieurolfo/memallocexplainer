<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <title>Heap Allocator</title>

    <!-- Add Boostrap -->
	<!-- <link rel="stylesheet" type="text/css" href="main.css"> -->
    <!-- Col and row from the example code in class -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">

	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700" rel="stylesheet">
	<script type="text/javascript" src="components/3-first-fit/jquery.min.js"></script>
	<script type="text/javascript" src="components/3-first-fit/jquery-ui.min.js"></script>
	<script type="text/javascript" src="components/3-first-fit/fabric.min.js"></script>

	<!-- Add our own CSS and JS -->
	<link href="components/main.css" rel="stylesheet" type="text/css">
    <!-- <link href="components/drag-and-drop/interact.js" rel="stylesheet" type="text/css"> -->
    <script src="components/drag-and-drop/interact.js" defer></script>
    <link href="components/buttons.css" rel="stylesheet" type="text/css">

	<!-- Add individual sections -->

	<link href="components/1-intro/intro.css" rel="stylesheet" type="text/css">
    <script src="components/1-intro/intro.js" defer></script>
    <link href="components/2-malloc/malloc.css" rel="stylesheet" type="text/css">
    <script src="components/2-malloc/malloc.js" defer></script>
    <link href="components/6-segregated-freelist/segregated-freelist.css" rel="stylesheet" type="text/css">
    <script src="components/6-segregated-freelist/segregated-freelist.js" defer></script>
    <link href="components/7-play/play.css" rel="stylesheet" type="text/css">
    <script src="components/7-play/play.js" defer></script>

    <!-- <script src="components/3-first-fit/shared-fit-game-logic.js" defer></script> -->



    <script src="components/3-first-fit/first-fit.js"></script>
    <link href="components/3-first-fit/first-fit.css" rel="stylesheet" type="text/css">



    <link href="components/4-best-fit/best-fit.css" rel="stylesheet" type="text/css">
    <script src="components/4-best-fit/best-fit.js"></script>

    <link href="components/7-play/play.css" rel="stylesheet" type="text/css">
    <script src="components/7-play/play.js" defer></script>

    <link href="components/8-conclusion/conclusion.css" rel="stylesheet" type="text/css">
    <script src="components/8-conclusion/conclusion.js" defer></script>


</head>
<body>

	<header id="header">
      <div class="jumbotron">
        <div class="container">
          <h1 class="display-3">Heap Allocation</h1>
          <p class="lead" align="left">an interactive explanation</p>
          <p>We will teach you heap allocation strategies</p>
        </div>
      </div>
    </header>

    <section id="intro">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                <h2>A train is a heap, it has lots of spaces</h2>
                <p>Click to load</p>
                    <img class="img img-fluid" id="figure-head" src="figures/train-head.svg"></img>
                    <img class="img img-fluid" id="figure-cart2" src="figures/train2.svg"></img>
                    <img class="img img-fluid" id="figure-cart2copy" src="figures/train2-copy.svg"></img>

                    <button id="first-fit-load-button" class="button" onclick="firstfitloadClicked()">Load Cargo</button>
              </div>
            </div>
        </div>
    </section>



	<section id="malloc">
		<div><div id="malloc-container" class="centered">
		<h2>Loading the Train</h2>
		<div id="malloc-description-text">
		In our explanation, we represent requests for memory allocation, called malloc in computer science terms, as placing cargo on train cars. To place cargo on a train, you will check train cars sequentially, and if they have enough space, press the button to load the cargo. Cargo can be placed on cars larger than them, but not cars smaller than them.
		</div>
		
		<div id="malloc-demo-1">
		<h5>Try and load the cargo!</h5>
		<div class="centered"><div id="malloc-cargo-box-1" class="malloc-cargo-box cargo-box">4</div></div>

		<img class="img img-fluid figure-head" id="figure-head-1" src="figures/train-head.svg"></img>
        <img class="img img-fluid figure-cart2" id="figure-cart2-1" src="figures/train-demo.svg"></img>
        
        <div><button id="demo-load-button-1" class="malloc-load-button button-pill button button-3d" onclick="demoLoadClicked1()">Load Cargo</button></div>
        </div>

        <div id="malloc-demo-2">

        	<div class="malloc-text centered">
        	Great, you placed the cargo! Now try with a cargo that is too big for the cart. 
        	</div>

	        <div class="centered"><div id="malloc-cargo-box-2" class="malloc-cargo-box cargo-box">10</div></div>

			<img class="img img-fluid figure-head" id="figure-head-2" src="figures/train-head.svg"></img>
	        <img class="img img-fluid figure-cart2" id="figure-cart2-2" src="figures/train-demo.svg"></img>
	        
	        <div><button id="malloc-load-button2" class=" malloc-load-button button button-3d button-pill" onclick="demoLoadClicked2()">Load Cargo</button></div>
	        </div>


        </div>

        <div id="malloc-section-end">
        <div class="malloc-text centered">
        It simply won't fit on the train car. If there isn't a train car big enough for the cargo, we won't be able to load it on the train and lose out on our profit!
	    </div>

	    <div class="malloc-text centered add-spacing">
        Now that we know the rules of the game, let's try and figure out the best way to load up our trains. 
	    </div>

	    </div>

    </section>

	<!-- Matt -->

    <section id="first-fit">
    
    <div class="centered">
		<div id="first-fit-header-text">Load the train by placing cargo in the first space it fits!</div>
		<div id="first-fit-description-text" >
		The cargo is located on the left of the screen. You will have three pieces of cargo to place, and you can only see the size of the current piece of cargo. Browse through the train using the left and right arrows until you find a spot where the cargo fits. You can see your current speed and space usage at the bottom of the window.
		</div>
	</div>

    <div><div id="first-fit-game-container" class="centered">
		<span id="first-fit-cargo-display-region">

			<div id="first-fit-cargo-display-header" class="display-header"></div>
			<!-- <div id="first-fit-current-cargo-size"></div> -->
			<div id="first-fit-current-cargo-box" class="centered"></div>
			<!-- <div id="first-fit-cargo2" class="cargo-box centered">?</div>
			<div id="first-fit-cargo3" class="cargo-box centered">?</div> -->
		</span>

		<span id="first-fit-current-car-region">
			<div id="first-fit-car-display-header" class="display-header"></div>
			<!-- <button id="button" onclick="buttonClicked()">place load</button> -->
			<div id="first-fit-car-display">
				<button id="first-fit-left-button" class="button button-3d button-circle" onclick="firstfitleftClicked()"><</button>
				<canvas id="first-fit-current-train"></canvas>
				<button id="first-fit-right-button" class="button button-3d button-circle" onclick="firstfitrightClicked()">></button>
			</div>


			<div class="centered">
				<div id="first-fit-car-capacity">hi</div>
				<button id="first-fit-load-button" class="button button-3d button-action button-jumbo " onclick="firstfitloadClicked()">Load</button>
				<div>
					<div id="first-fit-message-box" ></div>
				</div>
			</div>

		</span>

		<div id="first-fit-train-display-region">
			<div id="first-fit-click-counter">
				<span >Train cars inspected: </span><span id="first-fit-clicks"></span>
			</div>
			<div id="first-fit-util-counter">
				<span >Total train space used: </span><span id="first-fit-utilization"></span>
			</div>
			<canvas id="first-fit-train-display"></canvas>
		</div>
		<button id="first-fit-refresh-button" class="button" onclick="firstfitresetSimulation()">Refresh this Game</button>

	</div></div>

	<div id="first-fit-end-text" name="first-fit-segue">
	The strategy we just tried out, placing the cargo in the first-fitting spot, has its strengths and weaknesses. On one hand, we are able to place a given piece of cargo pretty quickly: we placed the first two pieces of cargo after only looking at a single car! However, we couldn't make the best use of our train's available space: we had what is referred to as fragmentation. <br><br>Our final stats were 5 cars inspected and 6/15 space utilization: can we do better with a different strategy?
	
	</div>
	</section>
	<!--  best fit -->
     <section id="best-fit">

	<div id="best-fit-header-text">Load the train by placing cargo in the smallest space it fits!</div>
		<div id="best-fit-description-text" >
		The same rules as above apply.
		</div>
		<span id="best-fit-cargo-display-region">

			<div id="best-fit-cargo-display-header" class="display-header"></div>

			<div id="best-fit-current-cargo-box" class="centered"></div>
			<div id="best-fit-cargo2" class="cargo-box centered">?</div>
			<div id="best-fit-cargo3" class="cargo-box centered">?</div>

		</span>

		<span id="best-fit-current-car-region">
			<div id="best-fit-car-display-header" class="display-header"></div>

			<div id="best-fit-car-display">

				<button id="best-fit-left-button" class="button button-circle" onclick="leftClicked()"></button>
				<canvas id="best-fit-current-train"></canvas>
				<button id="best-fit-right-button" class="button button-3d button-circle " onclick="rightClicked()">></button>
			</div>


			<div class="centered">
				<div id="best-fit-car-capacity">hi</div>
				<button id="best-fit-load-button" class="button button-3d button-action button-circle button-jumbo" onclick="loadClicked()">Load</button>
				<div>
					<div id="best-fit-message-box" ></div>
				</div>
			</div>

		</span>

		<div id="best-fit-train-display-region">
			<div id="best-fit-click-counter">
				<span >Train cars inspected: </span><span id="best-fit-clicks"></span>
			</div>
			<div id="best-fit-util-counter">
				<span >Total train space used: </span><span id="best-fit-utilization"></span>
			</div>
			<canvas id="best-fit-train-display"></canvas>
		</div>
		<button id="best-fit-refresh-button" class="button" onclick="resetSimulation()">Refresh this Game</button>

    </section>

	<section id="balance">
    </section>


	<section id="segregated-freelist">
        <div class="container" >
            <div class="row">
              <h5>Now let's create a cheat sheet! </h5>
              <div id="free-list-text" name="free-list-segue">
    Can you sort it into different bucket list by looking at each cart once? <br>Try drag the carts into different size list!
        		</div>
              <p></p>

            </div>
            <div class="row">
                <div class="train" id="train-drag-drop-example" >
                </div>
            </div>
            <div class="row">
                <div class="col-md-12" align="center">
                <h4>Drag the empty train into different categories of sizes!</h4>
                </div>
            </div>

        </div>
	</section>

	<section id="play">

		<span id="seg-free-cargo-display-region">

			<div id="seg-free-cargo-display-header" class="display-header"></div>

			<div id="seg-free-current-cargo-box" class="centered"></div>
			<div id="seg-free-cargo2" class="cargo-box centered">?</div>
			<div id="seg-free-cargo3" class="cargo-box centered">?</div>

		</span>

		<span id="seg-free-current-car-region">
			<div id="seg-free-car-display-header" class="display-header"></div>

			<div id="seg-free-car-display">
				<button id="seg-free-left-button" class="button button-circle" onclick="leftClickedSeg()"></button>
				<canvas id="seg-free-current-train"></canvas>
				<button id="seg-free-right-button" class="button button-circle" onclick="rightClickedSeg()">></button>
			</div>


			<div class="centered">
				<div id="seg-free-car-capacity">hi</div>
				<button id="seg-free-load-button" class="button" onclick="loadClickedSeg()">Load Cargo</button>
				<div>
					<div id="seg-free-message-box" ></div>
				</div>
			</div>

		</span>

		<div id="seg-free-train-display-region">
			<div id="seg-free-click-counter">
				<span >Train cars inspected: </span><span id="seg-free-clicks"></span>
			</div>
			<div id="seg-free-util-counter">
				<span >Total train space used: </span><span id="seg-free-utilization"></span>
			</div>
			<canvas id="seg-free-train-display"></canvas>
		</div>
		<button id="seg-free-refresh-button" class="button" onclick="resetSimulationSeg()">Refresh this Game</button>
	</section>

	<section id="conclusion">
	</section>

	<footer class="mt-5 pt-5 pb-5" id="footer">
      <div class="container">
        <p class="lead text-muted">CS 247</p>
      </div>
    </footer>

  </body>
</html>
